# Домашнее задание 4

Написать REST API для работы с коллекцией пользователей. Для тестирования роутов используй [Postman](https://www.getpostman.com/). Работа должна быть создана в репозитории `hw04-regular-expression`

## Шаг 1

- в коллекции `users` должны храниться такие поля с такими требованиями:
  - name:
    - обязательное;
    - содержит только латинские буквы или кириллицу;
  - email:
    - обязательное;
    - уникальное;
    - имеет формат: "буквы-цифры*@буквы*цифры\_.(опционально еще буквы и цифры, потому что email может быть на поддомене).буквы";
  - phone:
    - обязательное;
    - уникальное;
    - имеет формат: "+3(0000) 641-41-41";
  - passport:
    - обязательное;
    - может быть либо в формате "EH123456" (два латинских символа в верхнем регистре, после которых идут 6 цифр), либо в формате "9 цифр подряд";
  - birthday (год рождения):
    - обязательное;
    - формат: "DD-MM-YYYY";
    - требования:
      - дней не может быть больше 31;
      - если день рождения с 1 по 9, он должен указываться в формате "0x" (например, "09");
      - месяц не может быть больше 12;
      - если месяц с 1 по 9, он должен указываться в формате "0x" (например, "09");
      - год рождения должен начинаться с "19" или "20";
      - год рождения не может быть больше текущего года;

## Шаг 2

Создайте в приложении такие роуты:

### @ GET /api/users

- ничего не получает
- возвращает массив всех пользователей в json-формате со статусом `200`

### @ GET /api/users/:id

- Не получает `body`
- Получает параметр `id`
- Если такой `id` есть, возвращает объект пользователя в json-формате со статусом `200`
- Если такого `id` нет, возвращает json с ключом `"message": "Not found"` и статус `404`

### @ POST /api/users

- Получает `body` в формате `{name, email, phone, passport, birthday}` (все поля обязательны)
- Если в body нет каких-то обязательных полей или они не соответствуют правилам валидации Mongoose-cхемы, возвращает json с ключом `{"message": "missing required name field"}` и статусом `400`
- Если с `body` все хорошо, сохраняет пользователя в базу данных;
- Если объект успешно сохранен в базе - возвращает объект с добавленным `id` `{name, email, phone, passport, birthday}` и статусом `201`

### @ PUT /api/users/:id

- Получает параметр `id`
- Получает `body` в формате `{name, email, phone, passport, birthday}` (все поля обязательны)
- Если в body нет каких-то обязательных полей или они не соответствуют правилам валидации Mongoose-cхемы, возвращает json с ключом `{"message": "missing required name field"}` и статусом `400`
- Если с `body` все хорошо, пользователь обновляется в базе данных;
- Если объект успешно обновлен в базе - возвращает обновленный объект контакта и статусом `200`.
- Если пользователя с таким `id` нет, возвращает json с ключом `"message": "Not found"` и статусом `404`

### @ DELETE /api/users/:id

- Не получает `body`
- Получает параметр `id`
- если такой `id` есть, удаляет пользователя из базы данных и возвращает json формата `{"message": "contact deleted"}` и статусом `200`
- если такого `id` нет, возвращает json с ключом `"message": "Not found"` и статусом `404`
